<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script>
    // 함수
    // 여러 실행 코드들의 묶음(그룹화)
    // 자주 사용하는 코드(기능)들을 저장했다가 필요할 때 호출해서 사용
    // function 키워드를 사용하여 정의 => ES6차에서는 화살표 함수를 사용

    // 함수를 정의하는 방법
    // 1. 함수 선언문 : 기명 함수로 정의
    // function 함수명() {
    //   실행코드;
    // };

    // 2. 함수 표현식 : 익명 함수로 변수에 할당
    // 변수 = function () {
    //   실행코드;
    // };

    // 위와 같이 정의된 함수는 즉시 실행되지 않음, 메모리에 할당되어 있다가 함수가 호출되면 실행
    // 1. 함수명();
    // 2. 변수명(); 

    function greeting() {
      document,write('hello<br>');
    }
    greeting(); // hello undefined가 나오는데 undefined가 나오는 이유는 아래 greeting()함수로 덮여씌어지고 호이스팅이 일어났기 때문에

    function greeting(name) {
      document.write(`hello ${name} <br>`)
    }
    greeting('이회'); 
    
    
    // (참고) 함수 선언문과 함수 표현식의 차이점
    // 함수 선언문은 호이스팅(끌어올리기)이 일어난다.
    // 해당 스코프(유효범위)의 최상단으로 끌어올려진 것과 같은 현상
    // 변수나 함수 선언이 코드 실행보다 먼저 메모리에 할당(저장)되는 과정

    let count = 0;

    myFunc(); // 해당 함수가 아래에 있지만, 호이스팅, 즉 함수는 맨 위로 끌어올려지기 때문에 순서에 상관없이 myFunc()이 실행된다

    function myFunc() {
      count++;
      document.write(`hello ${count} <br>`)
    }
    myFunc();

    // 함수 표현식은 함수 전에 선언하면 error남
    // thefunc(); // error
    const thefunc = function () {
      count++;
      document.write(`bye ${count} <br>`);
    }
    thefunc();

    // 버튼
    // 함수 표현식

    // 버튼을 클릭할 때 마다 배경색이 바뀌도록 함수 만들기
    const color = ['yellow', 'aqua', 'purple', 'white'];

    let i = 0;
    function changeColor() {
      if(i >= color.length) {  // i++가 color 배열 개수를 넘어가지 않게 하기 위해 초기화 해줌
        i = 0;
      }

      const bodyTag = document.querySelector('body');
      bodyTag.style.backgroundColor = color[i++];
    }


    // 매개 변수가 있는 함수
    // function 함수명(매개변수1, 매개변수2, ...) {
    // 실행코드;
    //}
    // 함수명(인자값1, 인자값2,...);   // 인자값1은 매개변수1로 가고, 인자값2는 매개변수2로 가고
    function introduce(name, area) { // 외부에서 받을 데이터가 있으면 매개 변수 선언
      document.write(`안녕하세요. ${name}입니다.<br>`);
      document.write(`사는 곳은 ${area}입니다.<br>`);
    }
    introduce('이회은', '미국'); // 인자값(=인수 =매개값) 넘겨줌
    introduce('이회은');

    // 로그인 함수 만들기
    const dbId = 'leehoe';
    const dbPw = '1234';
    // 잘못된 id입력 시 : alert('존재하지 않는 아이디입니다.');
    // 잘못된 pw입력 시 : alert('잘못된 비밀번호입니다.');
    // 로그인 성공 시 : document.write(id + '님 방문을 환영합니다.');
    // TODO : 삼항 연산자로 더 간단하게 만들어보기!!
    function login(id, pw) {
      if(id === dbId) {
        if(pw === dbPw) {
          document.write(`${id}님 방문을 환영합니다.`);
        }else {
          alert('잘못된 비밀번호입니다.');
        }
      }else{
        alert('존재하지 않는 아이디입니다.');
      }
    }
    // const userId = prompt('아이디를 입력하세요.');
    // const userPw = prompt('비밀번호를 입력하세요.');
    // login(userId, userPw);


    // 매개변수 없이 함수에 전달된 값 받아오기
    // arguments 내장 객체
    // arguments는 javascript에 기본으로 내장되어 있는 객체
    // function 함수명() {
    //   arguments;
    // }
    // 함수명(인자값1, 인자값2, 인자값3);
    function sumAll() {
      // arguments = [94, 95, 29];
      let sum = 0;
      for (let i = 0; i < arguments.length; i++) {
        sum += arguments[i];  // 함수 영역에서만 쓸 수 있기 때문에 화살표 함수에서는 사용 못함
      }
      document.write(`총합: ${sum}<br>`);
    }
    sumAll(94, 95, 29);
    document.write('<br>');

    // 함수에서 return문의 역할!!
    // 데이터(결과값)를 반환
    // 함수를 강제 종료
    // function 함수명() {
    //   실행코드;
    //   return 값;

    //   실행코드2; //return앞에서 함수가 종료되서 실행코드2는 실행이 안됨
    // }
    function sum(num1, num2) {
      return num1 + num2;
    }
    const result = sum(10, 20);
    document.write(result, '<br>');

    function sum(num1, num2) {
      const result2 = num1 + num2;
      return result2
    }
    const result2 = sum(12, 22);
    document.write(result2, '<br>');

    // 두 과목의 점수를 입력 받아 평균 점수 구하기
    function testAvg(arrData) {
      let sum = 0;
      for (let i = 0; i < arrData.length; i++) {
        // sum += Number(prompt(arrData[i] + '점수는?', '0'));
      }
      const avg= sum / arrData.length;
      return avg;  //return까지 해줘야 아래 testAvg(arrSubject)로 반환됨
    }
    
    const arrSubject = ['국어', '수학'];
    const resultAvg = testAvg(arrSubject);
    document.write(`평균점수는 ${resultAvg}점 입니다.<br>`);

    
    // 이전/다음 버튼으로 이미지 넘기기
    // TODO : imgNum === 8에서 종료되는게 아니라 다시 1이 되도록 계속 돌 수 있도록 수정
    let imgNum = 1;
    function gallery(direct) {
      if (direct) {
        if (imgNum === 8) return; // 함수 종료 - 이미지가 8개밖에 없어서 imgNum이 8까지만 나오도록 수정
        imgNum++;
      }else {
        if (i === 1) return; // 함수 종료
        imgNum--;
      }
      const imgTag = document.querySelector('.photo');
      imgTag.setAttribute('src', `images/pic_${imgNum}.jpg`); // setAttribute() 태그의 속성의 값을 설정해줄 수 있다
    }




    // 재귀함수 호출
    // 함수 안에서 함수를 다시 호출하는 것
    // 함수를 반복문처럼 여러번 호출하기 위해 사용
    // function 함수명() {
    //   실행코드;
    //   함수명();  // 재귀함수 호출 - 자기 자신을 또 호출
    // }
    // 함수명();

    // 재귀 함수 호출을 적용하여 1~10까지 출력
    let num = 0;
    function testFunc() {
      num++;
      document.write(num, '<br>');
      if (num === 10) return; //무한이 반복되지 않도록!

      testFunc();
    }
    testFunc();

    // 스코프(유효 범위) 개념
    // 변수 또는 함수의 사용 가능한 유효 범위
    // 전역 스코프 : 코드의 어느 곳에서나 접근 가능
    // 블록 스코프 : 선언된 블록 내부에서만 접근 가능
    // 여기에서 블록은 함수, 조건문, 반복문 등 중괄호({})로 구분되는 모든 영역을 의미

    // 전역변수와 지역변수
    let globalNum = 50; // 전역변수
    function testVarScope() {
      let localNum = 200; // 지역변수
      document.write(`함수 밖: ${globalNum}<br>`);
      document.write(`함수 안: ${localNum}<br>`);
    }
    testVarScope();
    document.write(`함수 밖: ${globalNum}<br>`);
    // document.write(`함수 안: ${localNum}<br>`); // ERROR

    // 외부(전역) 함수와 내부(지역) 함수
    function outerFunc() { //외부 함수
      function innerFunc() { //내부 함수
        document.write('내부 함수<br>');
      }
      innerFunc();
    }
    outerFunc();
    // innerFunc(); // error - 내부함수는 외부함수 안에서만 호출 가능

    // 전역과 지역을 나누는 이유?
    // 변수명(아니면 비슷한 기능의 함수명) 충돌을 피하기 위해
    // 해당 데이터가 전체에서 쓰인다면 전역 변수로, 함수 내 또는 제어문 내에서만 쓰이면 지역변수로 선언
    // 지역변수의 대표적인 예 : for문의 초기화 식
    for (let i = 0; i < 1; i++) {
      
    }
    for (let i = 0; i < 2; i++) {
      
    }
    // for문에서 i는 지역변수로 계속 반복해서 쓸 수 있음

    


  </script>
</head>
<body>
  <button onclick="changeColor()">배경색 바꾸기</button>  <!-- 버튼을 쿨릭할 때마다 함수 호출함 -->
  
  <div>
    <p>
      <img src="images/pic_1.jpg" alt="photo" class="photo">
    </p>
    <p>
      <button onclick="gallery(0)">이전</button>
      <button onclick="gallery(1)">다음</button>
    </p>
  </div>

</body>
</html>